# サンプル 33: syslog

本サンプルはUDPを使用してCircleログメッセージのsyslogサーバーへ送信する
方法をデモします。Ethernetインターフェースを内蔵したRaspberry Piモデルしか
使用できません。サンプルをビルドする前に、kernel.cppファイルで設定を行う
必要があります。その際、syslogサーバーのIPアドレスとポート番号を設定する
必要があります。

Circleは`RFC5424`と`RFC5426`に準拠したsyslogプロトコルをサポートしています。
したがって、これらの規格に対応したsyslogサーバプログラム（スマートフォンなど）を
使用することができます。また、本サンプルに付属する"syslogserver"アプリケーションを
使用することもできます。このアプリケーションはLinuxにおいて動作確認済みであり、
別途 **"make syslogserver"** でビルドすることができます。使用する際にはコマンド
ラインでポート番号を指定する必要があります。

```
./syslogserver 8514
```

ポート番号が（syslogの標準ポートである）`514`の場合、root権限でこのプログラムを
実行する必要があることに注意してください。その他のポート番号(`8514`など)は通常の
ユーザ権限で使用できます。

本サンプルがインストールされたRaspberry Piの電源が入れる前に、syslogサーバ
アプリケーションを起動してください。そうしないとICMPから"Destination unreachable"
メッセージが表示されます。ただし、これは問題ではありません。Raspberry Piを起動して
数秒後にはCircleから送信されたログメッセージがsyslogサーバーに表示されるはずです。
このサンプルでは"Hello syslog!"メッセージを10回（5秒ごと）送信し、その後パニック
メッセージでシステムを停止します。
